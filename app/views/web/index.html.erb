
<div class="logo">
    <a href="/"><%= image_tag 'dactyl-hero.png' %></a>
</div>

<%= form_tag(params.except(:text), method: :post, class: 'mui-panel', id: 'this-form') do %>
    <legend>Generate a linguistic dactylogram below:</legend>

    <div class="mui-form-group">
        <textarea class="mui-form-control" name="text" rows="10" id="input_text_area"><%= @file_text %></textarea>
        <label class="mui-form-floating-label">
            <% if @file_text.blank? %>
                Write or paste any text here.
            <% else %>
                Your imported text is ready for review.  Click analyze when ready.
            <% end %>
        </label>
    </div>
    <div class="buttons">
	    <button type="submit" class="mui-btn mui-btn-default mui-btn-primary mui-btn-raised" onclick="javascript:$(this).attr('disabled', 'disabled'); $('#this-form').submit();">Analyze</button>
	    <%= link_to "Clear", 'javascript:$("textarea").val("")', class: "mui-btn mui-btn-default mui-btn-raised" %>
    </div>
<% end %>

<%= form_tag({action: :index}, multipart: true) do %>
    <span class="document">
        <%= file_field_tag 'file', accept: '.pdf,.docx,.rtf,.txt', id: "document_upload" %>
    </span>
    <%= submit_tag "Import File", class: "mui-btn mui-btn-default mui-btn-primary mui-btn-raised" %>
<% end %>

  <% flash.each do |name, msg| %>
    <%= content_tag(:div, msg) %>
  <% end %> 

  <P></P>
  
<script type="text/javascript">
  $('#document_upload').bind('change', function() {
    var size_in_kilobytes = this.files[0].size/1024;
    if (size_in_kilobytes > 500) {
      alert('Maximum file size is 500KB. Please choose a smaller file.');
    }
  });
</script>